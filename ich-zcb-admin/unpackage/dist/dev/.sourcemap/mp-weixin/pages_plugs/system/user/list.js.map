{"version":3,"sources":["uni-app:///pages_plugs/system/user/list.vue","uni-app:///main.js","webpack:///E:/appProject/ich-zcb/ich-zcb-admin/pages_plugs/system/user/list.vue?f49d","webpack:///E:/appProject/ich-zcb/ich-zcb-admin/pages_plugs/system/user/list.vue?f3e8","webpack:///E:/appProject/ich-zcb/ich-zcb-admin/pages_plugs/system/user/list.vue?7467","webpack:///E:/appProject/ich-zcb/ich-zcb-admin/pages_plugs/system/user/list.vue?daca"],"names":["value","label","components","bindRole","resetPassword","setAuthorizedAppLogin","data","loading","table1","action","columns","key","title","type","width","defaultValue","formatter","val","str","sortable","tagType","multipleSelection","selectItem","queryForm1","formData","dcloud_appid","mode","props","hidden","form1","gender","login_appid_type","allow_login_background","show","tips","optionType","onChange","that","border","itemWidth","showRule","option","maxlength","showWordLimit","autosize","minRows","maxRows","rules","username","required","validator","message","trigger","nickname","min","max","password","mobile","formType","formDatas","onLoad","vk","onReady","onShow","onHide","methods","init","originalForms","getAppList","url","success","dcloudAppidData","dcloudAppidData2","appid","name","appids","pageTo","resetForm","search","refresh","getCurrentRow","currentChange","selectionChange","addBtn","updateBtn","item","deleteBtn","deleteFn","_id","batchBtn","bindRoleBtn","resetPasswordBtn","frozen","user_ids","status","watch","filters","computed","wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4FA;AACA;AACA;AACA,kBACA;EAAAA;EAAAC;AAAA,GACA;EAAAD;EAAAC;AAAA,GACA;EAAAD;EAAAC;AAAA,EACA;AACA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAMA;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;IACA;MACA;MACAC;MACA;MACAD,OAEA;MACA;MACAE;QACA;QACAC;QACA;QACAC,UACA;UAAAC;UAAAC;UAAAC;UAAAC;QAAA,GACA;UAAAH;UAAAC;UAAAC;UAAAC;UAAAC;QAAA,GACA;UAAAJ;UAAAC;UAAAC;UAAAC;UAAAC;QAAA,GACA;UAAAJ;UAAAC;UAAAC;UAAAC;UAAAC;QAAA,GACA;UAAAJ;UAAAC;UAAAC;UAAAC;UACAE;YACA;YACA;YACA;YACA;YACAC;cACAC;YACA;YACA;YACA;UACA;QACA,GACA;UAAAP;UAAAC;UAAAC;UAAAC;UAAAC;QAAA,GACA;UAAAJ;UAAAC;UAAAC;UAAAC;QAAA,GACA;UAAAH;UAAAC;UAAAC;UAAAC;UAAAC;UAAAI;UACAb,OACA;YAAAN;YAAAC;YAAAmB;UAAA,GACA;YAAApB;YAAAC;YAAAmB;UAAA;QAEA,GACA;UAAAT;UAAAC;UAAAC;UAAAC;UAAAC;UAAAI;UACAb,OACA;YAAAN;YAAAC;YAAAmB;UAAA,GACA;YAAApB;YAAAC;YAAAmB;UAAA,GACA;YAAApB;YAAAC;YAAAmB;UAAA,GACA;YAAApB;YAAAC;YAAAmB;UAAA;QAEA,GACA;UAAAT;UAAAC;UAAAC;UAAAC;UAAAC;UAAAI;UACAb;QACA,GACA;UAAAK;UAAAC;UAAAC;UAAAC;UAAAK;QAAA,GACA;UAAAR;UAAAC;UAAAC;UAAAC;UAAAC;UAAAI;QAAA,GACA;UAAAR;UAAAC;UAAAC;UAAAC;UAAAC;QAAA,GACA;UAAAJ;UAAAC;UAAAC;UAAAC;QAAA,EACA;QACA;QACAO;QACA;QACAC;MACA;MACA;MACA;MACA;MACAC;QACA;QACAC;UACAC;UACA;QACA;;QACA;QACAf,UACA;UAAAC;UAAAC;UAAAC;UAAAC;UAAAY;UACApB;UACAqB;YAAA3B;YAAAC;UAAA;QACA,GACA;UAAAU;UAAAC;UAAAC;UAAAC;UAAAY;QAAA,GACA;UAAAf;UAAAC;UAAAC;UAAAC;UAAAY;QAAA,GACA;UAAAf;UAAAC;UAAAC;UAAAC;UAAAY;QAAA,GACA;UAAAf;UAAAC;UAAAC;UAAAC;UAAAY;QAAA,GACA;UAAAf;UAAAC;UAAAC;UAAAC;UAAAY;QAAA,GACA;UAAAf;UAAAiB;UAAAF;QAAA;MAEA;MACAG;QACA;QACAvB;UACAwB;UACAC;UACAC;QACA;QACA;QACAL;UACA;UACAlB;UACA;UACAC,UACA;YAAAC;YAAAC;YAAAC;YAAAoB;UAAA,GACA;YAAAtB;YAAAC;YAAAC;UAAA,GACA;YAAAF;YAAAC;YAAAC;YACAP;UACA,GACA;YAAAK;YAAAC;YAAAC;YAAAqB;YAAAD;UAAA,GACA;YAAAtB;YAAAC;YAAAC;UAAA,GACA;YACAF;YAAAC;YAAAC;YACAsB;YACA7B,OACA;cAAAN;cAAAC;YAAA,GACA;cAAAD;cAAAC;YAAA,EACA;YACAmC;cACA;gBACAC;cACA;gBACAA;cACA;YACA;UACA,GACA;YACA1B;YAAAC;YAAAC;YACAyB;YACAC;YACAjC;YACAqB;cAAA3B;cAAAC;YAAA;YACAuC;YACAJ;cAAA;cACA;cACAK;gBAAA;gBAAA;gBACA;kBACAT;gBACA;cACA;cACA;gBACAK;cACA;gBACAA;cACA;YACA;UACA;UACA;UACA;UACA;UACA;UACA;YAAA1B;YAAAC;YAAAC;YACA6B;YAAAC;YAAAC;cAAAC;cAAAC;YAAA;UACA,EACA;UACA;UACAC;YACAC,WACA;cACAC;cACAC;cACAC;cACAC;YACA,EACA;YACAC,WACA;cAAAJ;cAAAE;cAAAC;YAAA,GACA;cAAAE;cAAAC;cAAAJ;cAAAC;YAAA,EACA;YACAI,WACA;cAAAN;cAAAC;cAAAC;YAAA,EACA;YACAK,SACA;cAAAP;cAAAC;cAAAC;YAAA;UAEA;UACA;UACAM;UACA;UACAzB;QACA;MACA;MACA;MACA0B;MACA;IACA;EACA;EACA;EACAC;IAAA;IACAvB;IACAwB;IACAxB;IACAA;EACA;EACA;EACAyB;EACA;EACAC;EACA;EACAC;EACA;EACAC;IACA;IACAC;MACAC;MACA9B;IACA;IACA;IACA+B;MACA;MACAP;QACAQ;QACA/D;QACAgE;UACAC;UACA;UACA;UACA;UACAlC;UACAmC;YACAC;YACAC;UACA;UACAF;YACAC;YACAC;UACA;UACAF;YACAC;YACAC;UACA;UACA;UACArC;UACA;UACAkC;YACAI;UACA;UACAtC;QACA;MACA;IACA;IACA;IACAuC;MACAf;IACA;IACA;IACAgB;MACAhB;IACA;IACA;IACAiB;MACAzC;IACA;IACA;IACA0C;MACA1C;IACA;IACA;IACA2C;MACA;IACA;IACA;IACAC;MACA5C;IACA;IACA;IACA6C;MACA7C;IACA;IACA;IACA8C;MACA9C;MACAA;MACAA;MACAA;MACAA;IACA;IACA;IACA+C;MAAA;MACA/C;MACAA;MACAA;MACAA;MACAgD;MACAhD;IACA;IACA;IACAiD;MAAA;QAAAC;MACAA;QACA9E;QACAH;UACAkF;QACA;MACA;IACA;IACA;IACAC;MACA;QACA;UAAApD;UAAA;QACA;UAAAA;UAAA;QACA;UAAAA;UAAA;QACA;UAAA;MAAA;IAEA;IACA;IACAqD;MACA;MACA7B;QAAAwB;MAAA;IACA;IACA;IACAM;MACA;MACA9B;QAAAwB;MAAA;IACA;IACA;IACAO;MACA;MACAvD;QACAwD;MACA;MACAhC;QACAQ;QACAzD;QACAN;UACAuF;UACAC;QACA;QACAxB;UACAjC;YACAc;YACAtC;UACA;UACAwB;QACA;MACA;IACA;IACA;IACAhC;MACA;MACAgC;QACAwD;MACA;MACAxD;QACAJ;QACAoD;UACAQ;UACAtB;QACA;MACA;IACA;EACA;EACA;EACAwB,QAEA;EACA;EACAC,UAEA;EACA;EACAC,WAEA;AACA;AAAA,2B;;;;;;;;;;;;;;;;ACpdA;AAE2D;AAC3D;AACA;AAHA;AACAC,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;;;AAGnD;AACyK;AACzK,gBAAgB,6KAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACzBA;AAAA;AAAA;AAAA;AAA+nB,CAAgB,8mBAAG,EAAC,C","file":"pages_plugs/system/user/list.js","sourcesContent":["<template>\r\n\t<view class=\"page-body\">\r\n\t\t<!-- 请不要修改此页面的代码，因为更新后会覆盖，你自己系统的用户管理不应该在这个页面上开发，你应该复制整个页面，在别的目录创建用户管理。 -->\r\n\t\t<!-- 请不要修改此页面的代码，因为更新后会覆盖，你自己系统的用户管理不应该在这个页面上开发，你应该复制整个页面，在别的目录创建用户管理。 -->\r\n\t\t<!-- 请不要修改此页面的代码，因为更新后会覆盖，你自己系统的用户管理不应该在这个页面上开发，你应该复制整个页面，在别的目录创建用户管理。 -->\r\n\t\t<!-- 请不要修改此页面的代码，因为更新后会覆盖，你自己系统的用户管理不应该在这个页面上开发，你应该复制整个页面，在别的目录创建用户管理。 -->\r\n\t\t<!-- 请不要修改此页面的代码，因为更新后会覆盖，你自己系统的用户管理不应该在这个页面上开发，你应该复制整个页面，在别的目录创建用户管理。 -->\r\n\t\t<!-- 请不要修改此页面的代码，因为更新后会覆盖，你自己系统的用户管理不应该在这个页面上开发，你应该复制整个页面，在别的目录创建用户管理。 -->\r\n\r\n\t\t<!-- 页面内容开始 -->\r\n\r\n\t\t<!-- 表格搜索组件开始 -->\r\n\t\t<vk-data-table-query\r\n\t\t\tv-model=\"queryForm1.formData\"\r\n\t\t\t:columns=\"queryForm1.columns\"\r\n\t\t\t@search=\"search\"\r\n\t\t></vk-data-table-query>\r\n\t\t<!-- 表格搜索组件结束 -->\r\n\r\n\t\t<!-- 自定义按钮区域开始 -->\r\n\t\t<view class=\"vk-table-button-box\">\r\n\t\t\t<el-button type=\"success\" size=\"small\" icon=\"el-icon-circle-plus-outline\" @click=\"addBtn\">添加</el-button>\r\n\t\t\t<!-- 批量操作 -->\r\n\t\t\t<el-dropdown v-if=\"table1.multipleSelection\" :split-button=\"false\"\ttrigger=\"click\" @command=\"batchBtn\">\r\n\t\t\t\t<el-button type=\"danger\" size=\"small\"\r\n\t\t\t\t\t:disabled=\"table1.multipleSelection.length === 0\"\r\n\t\t\t\t>\r\n\t\t\t\t\t批量操作<i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n\t\t\t\t</el-button>\r\n\t\t\t\t<el-dropdown-menu slot=\"dropdown\">\r\n\t\t\t\t\t<el-dropdown-item :command=\"1\">账号批量解冻</el-dropdown-item>\r\n\t\t\t\t\t<el-dropdown-item :command=\"2\">账号批量冻结</el-dropdown-item>\r\n\t\t\t\t\t<el-dropdown-item :command=\"3\">批量设置可登录的应用</el-dropdown-item>\r\n\t\t\t\t</el-dropdown-menu>\r\n\t\t\t</el-dropdown>\r\n\r\n\t\t\t<el-button type=\"primary\" size=\"small\" icon=\"el-icon-s-tools\" :disabled=\"!table1.selectItem\" @click=\"bindRoleBtn\">角色绑定</el-button>\r\n\t\t\t<el-button type=\"primary\" size=\"small\" icon=\"el-icon-warning-outline\" :disabled=\"!table1.selectItem\" @click=\"resetPasswordBtn\">重置密码</el-button>\r\n\t\t</view>\r\n\t\t<!-- 自定义按钮区域结束 -->\r\n\r\n\t\t<!-- 表格组件开始 -->\r\n\t\t<vk-data-table\r\n\t\t\tref=\"table1\"\r\n\t\t\t:action=\"table1.action\"\r\n\t\t\t:columns=\"table1.columns\"\r\n\t\t\t:query-form-param=\"queryForm1\"\r\n\t\t\t:right-btns=\"['detail_auto','update','delete']\"\r\n\t\t\t:selection=\"true\"\r\n\t\t\t:row-no=\"true\"\r\n\t\t\t:pagination=\"true\"\r\n\t\t\t@update=\"updateBtn\"\r\n\t\t\t@delete=\"deleteBtn\"\r\n\t\t\t@current-change=\"currentChange\"\r\n\t\t\t@selection-change=\"selectionChange\"\r\n\t\t></vk-data-table>\r\n\t\t<!-- 表格组件结束 -->\r\n\r\n\t\t<!-- 添加或编辑的弹窗开始 -->\r\n\t\t<vk-data-dialog\r\n\t\t\tv-model=\"form1.props.show\"\r\n\t\t\t:title=\"form1.props.title\"\r\n\t\t\twidth=\"580px\"\r\n\t\t\ttop=\"4vh\"\r\n\t\t\tmode=\"form\"\r\n\t\t>\r\n\t\t\t<vk-data-form\r\n\t\t\t\tref=\"form1\"\r\n\t\t\t\tv-model=\"form1.data\"\r\n\t\t\t\t:rules=\"form1.props.rules\"\r\n\t\t\t\t:action=\"form1.props.action\"\r\n\t\t\t\t:form-type=\"form1.props.formType\"\r\n\t\t\t\t:columns='form1.props.columns'\r\n\t\t\t\tlabel-width=\"120px\"\r\n\t\t\t\tmax-height=\"700px\"\r\n\t\t\t\t@success=\"form1.props.show = false;refresh();\"\r\n\t\t\t></vk-data-form>\r\n\t\t</vk-data-dialog>\r\n\t\t<!-- 添加或编辑的弹窗结束 -->\r\n\r\n\t\t<!-- 用户角色授权弹窗 -->\r\n\t\t<bindRole v-model=\"formDatas.bindRole\"></bindRole>\r\n\t\t<!-- 重置密码弹窗 -->\r\n\t\t<resetPassword v-model=\"formDatas.resetPassword\"></resetPassword>\r\n\t\t<!-- 批量设置用户允许登录的客户端 -->\r\n\t\t<setAuthorizedAppLogin v-model=\"formDatas.setAuthorizedAppLogin\" @success=\"refresh\"></setAuthorizedAppLogin>\r\n\r\n\t\t<!-- 页面内容结束 -->\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tvar that;\t\t\t\t\t\t\t\t\t\t\t\t\t// 当前页面对象\r\n\tvar vk = uni.vk;\t\t\t\t\t\t\t\t\t// vk实例\r\n\tvar originalForms = {};\t\t\t\t\t\t// 表单初始化数据\r\n\tvar genderData = [\r\n\t\t{ value:1, label:\"男\"},\r\n\t\t{ value:2, label:\"女\"},\r\n\t\t{ value:0, label:\"保密\"}\r\n\t];\r\n\tvar dcloudAppidData = [];\r\n\r\n\timport bindRole from './form/bindRole'\r\n\timport resetPassword from './form/resetPassword'\r\n\timport setAuthorizedAppLogin from './form/setAuthorizedAppLogin'\r\n\r\n\texport default {\r\n\t\tcomponents:{\r\n\t\t\tbindRole,\r\n\t\t\tresetPassword,\r\n\t\t\tsetAuthorizedAppLogin\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\t// 页面数据变量\r\n\t\t\treturn {\r\n\t\t\t\t// 页面是否请求中或加载中\r\n\t\t\t\tloading:false,\r\n\t\t\t\t// init请求返回的数据\r\n\t\t\t\tdata:{\r\n\r\n\t\t\t\t},\r\n\t\t\t\t// 表格相关开始 -----------------------------------------------------------\r\n\t\t\t\ttable1:{\r\n\t\t\t\t\t// 表格数据请求地址\r\n\t\t\t\t\taction:\"admin/system/user/sys/getList\",\r\n\t\t\t\t\t// 表格字段显示规则\r\n\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t{ key:\"avatar\", title:\"头像\", type:\"avatar\", width:80 },\r\n\t\t\t\t\t\t{ key:\"username\", title:\"用户名\", type:\"text\", width:180, defaultValue:'未设置' },\r\n\t\t\t\t\t\t{ key:\"nickname\", title:\"昵称\", type:\"text\", width:180, defaultValue:'未设置' },\r\n\t\t\t\t\t\t{ key:\"mobile\", title:\"手机号\", type:\"text\", width:120, defaultValue:\"未绑定\" },\r\n\t\t\t\t\t\t{ key:\"appList\", title:\"可登录的应用\", type:\"html\", width:220,\r\n\t\t\t\t\t\t\tformatter: function(val, row, column, index) {\r\n\t\t\t\t\t\t\t\tif(typeof row.dcloud_appid === \"undefined\") return \"全部应用\";\r\n\t\t\t\t\t\t\t\tif(row.dcloud_appid.length === 0) return \"未绑定任何应用\";\r\n\t\t\t\t\t\t\t\tif(val.length === 0 && row.dcloud_appid.length > 0) return row.dcloud_appid;\r\n\t\t\t\t\t\t\t\tlet str = \"\";\r\n\t\t\t\t\t\t\t\tval.map((item, index) => {\r\n\t\t\t\t\t\t\t\t\tstr += `、${item.name}`;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif(str) str = str.substring(1);\r\n\t\t\t\t\t\t\t\treturn str;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ key:\"role\", title:\"角色\", type:\"text\", width:120, defaultValue:'无' },\r\n\t\t\t\t\t\t{ key:\"comment\", title:\"备注\", type:\"text\", width:160 },\r\n\t\t\t\t\t\t{ key:\"allow_login_background\", title:\"允许登录后台\", type:\"tag\", width: 140, defaultValue:false, sortable:\"custom\",\r\n\t\t\t\t\t\t\tdata:[\r\n\t\t\t\t\t\t\t\t{ value:true, label:\"允许\", tagType:\"success\" },\r\n\t\t\t\t\t\t\t\t{ value:false, label:\"禁止\", tagType:\"danger\" }\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ key:\"status\", title:\"账户状态\", type:\"tag\", width:120, defaultValue:0, sortable:\"custom\",\r\n\t\t\t\t\t\t\tdata:[\r\n\t\t\t\t\t\t\t\t{ value:0, label:\"正常\", tagType:\"success\" },\r\n\t\t\t\t\t\t\t\t{ value:1, label:\"冻结\", tagType:\"danger\" },\r\n\t\t\t\t\t\t\t\t{ value:2, label:\"审核中\", tagType:\"primary\" },\r\n\t\t\t\t\t\t\t\t{ value:3, label:\"审核拒绝\", tagType:\"info\" }\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ key:\"gender\", title:\"性别\", type:\"radio\", width:80, defaultValue:0, sortable:\"custom\",\r\n\t\t\t\t\t\t\tdata:genderData\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ key:\"register_date\", title:\"注册时间\", type:\"time\", width:160, sortable:\"custom\" },\r\n\t\t\t\t\t\t{ key:\"last_login_date\", title:\"最后登录时间\", type:\"dateDiff\", width:130, defaultValue:'从未登录过', sortable:\"custom\" },\r\n\t\t\t\t\t\t{ key:\"last_login_ip\", title:\"最后登录ip\", type:\"text\", width:120, defaultValue:'从未登录过' },\r\n\t\t\t\t\t\t{ key:\"_id\", title:\"id\", type:\"text\", width:280 },\r\n\t\t\t\t\t],\r\n\t\t\t\t\t// 多选框选中的值\r\n\t\t\t\t\tmultipleSelection:[],\r\n\t\t\t\t\t// 当前高亮的记录\r\n\t\t\t\t\tselectItem:\"\",\r\n\t\t\t\t},\r\n\t\t\t\t// 表格相关结束 -----------------------------------------------------------\r\n\t\t\t\t// 表单相关开始-----------------------------------------------------------\r\n\t\t\t\t// 查询表单请求数据\r\n\t\t\t\tqueryForm1:{\r\n\t\t\t\t\t// 查询表单数据源，可在此设置默认值\r\n\t\t\t\t\tformData:{\r\n\t\t\t\t\t\tdcloud_appid:\"\"\r\n\t\t\t\t\t\t//allow_login_background : true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// 查询表单的字段规则 fieldName:指定数据库字段名,不填默认等于key\r\n\t\t\t\t\tcolumns:[\r\n\t\t\t\t\t\t{ key:\"dcloud_appid\", title:\"所属应用\", type:\"select\", width:160, mode:\"custom\",\r\n\t\t\t\t\t\t\tdata:[],\r\n\t\t\t\t\t\t\tprops:{ value:\"appid\", label:\"name\" }\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ key:\"username\", title:\"用户名\", type:\"text\", width:160, mode:\"%%\" },\r\n\t\t\t\t\t\t{ key:\"nickname\", title:\"昵称\", type:\"text\", width:140, mode:\"%%\" },\r\n\t\t\t\t\t\t{ key:\"mobile\", title:\"手机号\", type:\"text\", width:140, mode:\"%%\" },\r\n\t\t\t\t\t\t{ key:\"_id\", title:\"ID\", type:\"text\", width:140, mode:\"=\" },\r\n\t\t\t\t\t\t{ key:\"register_date\", title:\"注册时间\", type:\"datetimerange\", width:380, mode:\"[]\" },\r\n\t\t\t\t\t\t{ key:\"allow_login_background\", hidden:true, mode:\"=\" },\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\tform1: {\r\n\t\t\t\t\t// 表单请求数据，此处可以设置默认值\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tgender:0,\r\n\t\t\t\t\t\tlogin_appid_type:1,\r\n\t\t\t\t\t\tallow_login_background:false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// 表单属性\r\n\t\t\t\t\tprops: {\r\n\t\t\t\t\t\t// 表单请求地址\r\n\t\t\t\t\t\taction:\"\",\r\n\t\t\t\t\t\t// 表单字段显示规则\r\n\t\t\t\t\t\tcolumns:[\r\n\t\t\t\t\t\t\t{ key:\"username\", title:\"用户名\", type:\"text\", show:[\"add\"] },\r\n\t\t\t\t\t\t\t{ key:\"nickname\", title:\"昵称\", type:\"text\" },\r\n\t\t\t\t\t\t\t{ key:\"gender\", title:\"性别\", type:\"radio\",\r\n\t\t\t\t\t\t\t\tdata: genderData\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{ key:\"password\", title:\"密码\", type:\"text\", tips:\"若密码为空，则默认为234567\", show:[\"add\"] },\r\n\t\t\t\t\t\t\t{ key:\"mobile\", title:\"手机号\", type:\"text\" },\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t  key:\"login_appid_type\", title:\"登录权限\", type:\"radio\",\r\n\t\t\t\t\t\t\t  optionType:\"button\",\r\n\t\t\t\t\t\t\t\tdata:[\r\n\t\t\t\t\t\t\t\t\t{ value:1, label:\"部分应用\" },\r\n\t\t\t\t\t\t\t\t\t{ value:0, label:\"全部应用\" }\r\n\t\t\t\t\t\t\t  ],\r\n\t\t\t\t\t\t\t\tonChange:function(val, formData, column, index, option){\r\n\t\t\t\t\t\t\t\t\tif(val === 1){\r\n\t\t\t\t\t\t\t\t\t\tthat.form1.data.allow_login_background = false\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tthat.form1.data.allow_login_background = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t  key:\"dcloud_appid\", title:\"可登录的应用\", type:\"checkbox\",\r\n\t\t\t\t\t\t\t  border:true,\r\n\t\t\t\t\t\t\t  itemWidth:100,\r\n\t\t\t\t\t\t\t\tdata:[],\r\n\t\t\t\t\t\t\t  props:{ value:\"appid\", label:\"name\" },\r\n\t\t\t\t\t\t\t\tshowRule:\"login_appid_type=1\",\r\n\t\t\t\t\t\t\t\tonChange:function(val, formData, column, index, option=[]){\r\n\t\t\t\t\t\t\t\t\tlet allow_login_background = false;\r\n\t\t\t\t\t\t\t\t\toption.map((item={}, index) => {\r\n\t\t\t\t\t\t\t\t\t\tif(item.type && item.type.indexOf(\"admin\") > -1){\r\n\t\t\t\t\t\t\t\t\t\t\tallow_login_background = true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tif(that.form1.data.login_appid_type === 1){\r\n\t\t\t\t\t\t\t\t\t\tthat.form1.data.allow_login_background = allow_login_background;\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tthat.form1.data.allow_login_background = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t// {\r\n\t\t\t\t\t\t\t// \tkey:\"allow_login_background\", title:\"允许登录后台?\", type:\"switch\",\r\n\t\t\t\t\t\t\t// \ttips:\"只有同时设置可登录的应用有管理端以及允许登后台，该用户才能登录管理端\"\r\n\t\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t\t{ key:\"comment\", title:\"备注\", type:\"textarea\",\r\n\t\t\t\t\t\t\t\tmaxlength:\"99\", showWordLimit:true, autosize:{ minRows: 2, maxRows: 10 } ,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\t// 表单对应的验证规则\r\n\t\t\t\t\t\trules:{\r\n\t\t\t\t\t\t\tusername:[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tvalidator:vk.pubfn.validator(\"username\"),\r\n\t\t\t\t\t\t\t\t\tmessage: '用户名以字母开头，长度在6~18之间，只能包含字母、数字和下划线',\r\n\t\t\t\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tnickname: [\r\n\t\t\t\t\t\t\t\t{ required:true, message:'昵称为必填字段', trigger:'blur' },\r\n\t\t\t\t\t\t\t\t{ min:2, max:20, message:'昵称长度在 2 到 20 个字符', trigger:'blur' }\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tpassword: [\r\n\t\t\t\t\t\t\t\t{ validator:vk.pubfn.validator(\"password\"), message: '密码长度在6~18之间，只能包含字母、数字和下划线', trigger: 'blur' }\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tmobile:[\r\n\t\t\t\t\t\t\t  { validator:vk.pubfn.validator(\"mobile\"), message: '手机号格式错误', trigger: 'blur' }\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// add 代表添加 update 代表修改\r\n\t\t\t\t\t\tformType:'',\r\n\t\t\t\t\t\t// 是否显示表单1 的弹窗\r\n\t\t\t\t\t\tshow: false,\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t// 其他表单属性容器(请勿修改)\r\n\t\t\t\tformDatas:{},\r\n\t\t\t\t// 表单相关结束-----------------------------------------------------------\r\n\t\t\t};\r\n\t\t},\r\n\t\t// 监听 - 页面每次【加载时】执行(如：前进)\r\n\t\tonLoad(options = {}) {\r\n\t\t\tthat = this;\r\n\t\t\tvk = that.vk;\r\n\t\t\tthat.options = options;\r\n\t\t\tthat.init(options);\r\n\t\t},\r\n\t\t// 监听 - 页面【首次渲染完成时】执行。注意如果渲染速度快，会在页面进入动画完成前触发\r\n\t\tonReady() {},\r\n\t\t// 监听 - 页面每次【显示时】执行(如：前进和返回) (页面每次出现在屏幕上都触发，包括从下级页面点返回露出当前页面)\r\n\t\tonShow() {},\r\n\t\t// 监听 - 页面每次【隐藏时】执行(如：返回)\r\n\t\tonHide() {},\r\n\t\t// 函数\r\n\t\tmethods: {\r\n\t\t\t// 页面数据初始化函数\r\n\t\t\tinit(options) {\r\n\t\t\t\toriginalForms[\"form1\"] = vk.pubfn.copyObject(that.form1);\r\n\t\t\t\tthat.getAppList();\r\n\t\t\t},\r\n\t\t\t// 获取应用列表\r\n\t\t\tgetAppList(obj){\r\n\t\t\t\t// 请在store/modules/$app.js文件里增加代码 appList: lifeData.$app.appList || []\r\n\t\t\t\tvk.callFunction({\r\n\t\t\t\t\turl: 'admin/system/app/sys/getList',\r\n\t\t\t\t\tdata:{},\r\n\t\t\t\t\tsuccess:function(data){\r\n\t\t\t\t\t\tdcloudAppidData = data.rows;\r\n\t\t\t\t\t\tlet dcloudAppidData1 = vk.pubfn.copyObject(data.rows);\r\n\t\t\t\t\t\tlet dcloudAppidData2 = vk.pubfn.copyObject(data.rows);\r\n\t\t\t\t\t\tlet index1 = vk.pubfn.getListIndex(that.form1.props.columns, \"key\", \"dcloud_appid\");\r\n\t\t\t\t\t\tthat.form1.props.columns[index1].data = dcloudAppidData1;\r\n\t\t\t\t\t\tdcloudAppidData2.unshift({\r\n\t\t\t\t\t\t\tappid:\"___error___\",\r\n\t\t\t\t\t\t\tname:\"不存在的应用\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdcloudAppidData2.unshift({\r\n\t\t\t\t\t\t\tappid:\"___empty-array___\",\r\n\t\t\t\t\t\t\tname:\"未绑定应用\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdcloudAppidData2.unshift({\r\n\t\t\t\t\t\t\tappid:\"___non-existent___\",\r\n\t\t\t\t\t\t\tname:\"全部应用\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tlet index2 = vk.pubfn.getListIndex(that.queryForm1.columns, \"key\", \"dcloud_appid\");\r\n\t\t\t\t\t\tthat.queryForm1.columns[index2].data = dcloudAppidData2;\r\n\t\t\t\t\t\tlet appids = [];\r\n\t\t\t\t\t\tdcloudAppidData.map((item, index) => {\r\n\t\t\t\t\t\t\tappids.push(item.appid);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthat.queryForm1.formData.appids = appids;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 页面跳转\r\n\t\t\tpageTo(path) {\r\n\t\t\t\tvk.navigateTo(path);\r\n\t\t\t},\r\n\t\t\t// 表单重置\r\n\t\t\tresetForm(){\r\n\t\t\t\tvk.pubfn.resetForm(originalForms, that);\r\n\t\t\t},\r\n\t\t\t// 搜索\r\n\t\t\tsearch(){\r\n\t\t\t\tthat.$refs.table1.query();\r\n\t\t\t},\r\n\t\t\t// 刷新\r\n\t\t\trefresh(){\r\n\t\t\t\tthat.$refs.table1.refresh();\r\n\t\t\t},\r\n\t\t\t// 获取当前选中的行的数据\r\n\t\t\tgetCurrentRow(key){\r\n\t\t\t\treturn that.$refs.table1.getCurrentRow(key);\r\n\t\t\t},\r\n\t\t\t// 监听 - 行的选中高亮事件\r\n\t\t\tcurrentChange(val){\r\n\t\t\t\tthat.table1.selectItem = val;\r\n\t\t\t},\r\n\t\t\t// 当选择项发生变化时会触发该事件\r\n\t\t\tselectionChange(list) {\r\n\t\t\t\tthat.table1.multipleSelection = list;\r\n\t\t\t},\r\n\t\t\t// 显示添加页面\r\n\t\t\taddBtn(){\r\n\t\t\t\tthat.resetForm();\r\n\t\t\t\tthat.form1.props.action = 'admin/system/user/sys/add';\r\n\t\t\t\tthat.form1.props.formType = 'add';\r\n\t\t\t\tthat.form1.props.title = '添加';\r\n\t\t\t\tthat.form1.props.show = true;\r\n\t\t\t},\r\n\t\t\t// 显示修改页面\r\n\t\t\tupdateBtn({ item }){\r\n\t\t\t\tthat.form1.props.action = 'admin/system/user/sys/update';\r\n\t\t\t\tthat.form1.props.formType = 'update';\r\n\t\t\t\tthat.form1.props.title = '编辑';\r\n\t\t\t\tthat.form1.props.show = true;\r\n\t\t\t\titem.login_appid_type = typeof item.dcloud_appid === \"undefined\" ? 0 :1;\r\n\t\t\t\tthat.form1.data = item;\r\n\t\t\t},\r\n\t\t\t// 删除按钮\r\n\t\t\tdeleteBtn({ item, deleteFn }){\r\n\t\t\t\tdeleteFn({\r\n\t\t\t\t\taction:\"admin/system/user/sys/delete\",\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t_id: item._id\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 监听 - 批量操作的按钮点击事件\r\n\t\t\tbatchBtn(index){\r\n\t\t\t\tswitch(index){\r\n\t\t\t\t\tcase 1: that.frozen(0); break;\r\n\t\t\t\t\tcase 2: that.frozen(1); break;\r\n\t\t\t\t\tcase 3: that.setAuthorizedAppLogin(); break;\r\n\t\t\t\t\tdefault: break;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 角色绑定按钮\r\n\t\t\tbindRoleBtn(){\n\t\t\t\tlet item = that.getCurrentRow(true);\n\t\t\t\tvk.pubfn.openForm('bindRole',{ item });\n\t\t\t},\r\n\t\t\t// 重置密码按钮\r\n\t\t\tresetPasswordBtn(){\n\t\t\t\tlet item = that.getCurrentRow(true);\n\t\t\t\tvk.pubfn.openForm('resetPassword',{ item });\r\n\t\t\t},\r\n\t\t\t//账户批量冻结/解冻\r\n\t\t\tfrozen(status){\r\n\t\t\t\tlet user_ids = [];\r\n\t\t\t\tthat.table1.multipleSelection.map((item,index)=>{\r\n\t\t\t\t\tuser_ids.push(item._id);\r\n\t\t\t\t});\r\n\t\t\t\tvk.callFunction({\r\n\t\t\t\t\turl: 'admin/system/user/sys/batchUpdateStatus',\r\n\t\t\t\t\ttitle:'请求中...',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tuser_ids,\r\n\t\t\t\t\t\tstatus\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess:function(data) {\r\n\t\t\t\t\t\tthat.$notify({\r\n\t\t\t\t\t\t\tmessage:'批量操作成功!',\r\n\t\t\t\t\t\t\ttype:'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthat.refresh();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 批量设置允许登录的客户端\r\n\t\t\tsetAuthorizedAppLogin(){\r\n\t\t\t\tlet user_ids = [];\r\n\t\t\t\tthat.table1.multipleSelection.map((item,index)=>{\r\n\t\t\t\t\tuser_ids.push(item._id);\r\n\t\t\t\t});\r\n\t\t\t\tthat.formDatas.setAuthorizedAppLogin = {\r\n\t\t\t\t\tshow:true,\r\n\t\t\t\t\titem:{\r\n\t\t\t\t\t\tuser_ids,\r\n\t\t\t\t\t\tdcloudAppidData\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 监听属性\r\n\t\twatch: {\r\n\r\n\t\t},\r\n\t\t// 过滤器\r\n\t\tfilters: {\r\n\r\n\t\t},\r\n\t\t// 计算属性\r\n\t\tcomputed: {\r\n\r\n\t\t}\r\n\t};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages_plugs/system/user/list.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./list.vue?vue&type=template&id=214b42d6&scoped=true&\"\nvar renderjs\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"214b42d6\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages_plugs/system/user/list.vue\"\nexport default component.exports","export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=template&id=214b42d6&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.table1.multipleSelection\n    ? _vm.table1.multipleSelection.length\n    : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.form1.props.show = false\n      _vm.refresh()\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=script&lang=js&\""],"sourceRoot":""}